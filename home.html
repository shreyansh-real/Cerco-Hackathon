<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cerco</title>
<link rel="stylesheet" href="stylehome.css" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<!-- Mobile Top Bar -->
<div class="topbar">
  <div class="logo">Cerco</div>
  <button class="menu-toggle" id="menuToggle">â˜°</button>
</div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <a href="#" class="logo-container">
    <div class="logo-icon"></div>
    <span class="logo-text">Cerco</span>
  </a>
  <ul class="nav-links top-links">
    <li><a href="#"><span class="icon">ğŸ </span><span class="label" data-i18n="home">Home</span></a></li>
    <li>
    <a href="#footer">
    <span class="icon">ğŸ“</span>
    <span class="label" data-i18n="contact">Contact</span>
  </a>
</li>
  </ul>
  <ul class="nav-links bottom-links">
    <li><a href="#" id="openAccount"><span class="icon">ğŸ‘¤</span><span class="label" data-i18n="account">Account</span></a></li>
    <li><a href="#" id="openSettings"><span class="icon">âš™ï¸</span><span class="label" data-i18n="settings">Settings</span></a></li>
    <li><a href="#" id="logoutBtn"><span class="icon">ğŸšª</span><span class="label" data-i18n="logout">Logout</span></a></li>
  </ul>
</div>

<!-- Main Content -->
<div class="main">
  <!-- Hero Section -->
  <div class="hero-section">
    <h1 id="welcomeMessage"><b data-i18n="welcome">ğ•ğ•–ğ•ğ•”ğ• ğ•ğ•– ğ•‹ğ•  â„‚ğ•–ğ•£ğ•”ğ•  !</b></h1>
    <div class="search-container">
      <input type="text" id="searchInput" data-i18n="searchPlaceholder" placeholder="Search services..." />
      <button class="search-btn"data-i18n="searchBtn">Search</button>
      <div id="searchResults" class="search-results"></div>
    </div>
  </div>
  <!-- Search Results Section (Initially Hidden) -->
  <div id="searchResultsContainer" class="search-results-section" style="display:none; max-width:1200px; margin:40px auto;">
      <h2 class="search-results-title" style="font-size:28px; font-weight:800; color:#1a3d5c; margin-bottom:25px; text-align:center;">Search Results</h2>
      <div class="services-grid" id="searchServicesGrid"></div>
  </div>

  <!-- Offers Section -->
  <div class="offers-section">
    <div class="offers-header">
      <h2 class="offers-title"data-i18n="topOffers">ğŸ”¥Top Offers</h2>
      <a class="view-all" id="viewAllBtn"data-i18n="viewAll">View All</a>
    </div>
    <div class="single-offer-banner" id="homeOfferBanner"></div>
  </div>

  <!-- Categories Section -->
  <div class="categories-section">
    <h2 class="categories-title"data-i18n="browseCategories">Browse Categories</h2>
    <div class="categories-grid">
      <div class="category-card" data-category="Home Cleaning"><div class="icon">ğŸ§¹</div><h3>Home Cleaning</h3></div>
      <div class="category-card" data-category="Plumbing Services"><div class="icon">ğŸ”§</div><h3>Plumbing Services</h3></div>
      <div class="category-card" data-category="Electrical Works"><div class="icon">âš¡</div><h3>Electrical Works</h3></div>
      <div class="category-card" data-category="Painting & Renovation"><div class="icon">ğŸ¨</div><h3>Painting and Renovation</h3></div>
      <div class="category-card" data-category="Carpenter Services"><div class="icon">ğŸ”¨</div><h3>Carpentry</h3></div>
      <div class="category-card" data-category="Appliances Repair"><div class="icon">ğŸ§°</div><h3>Appliance Repair</h3></div>
      <div class="category-card" data-category="Beauty and Wellness"><div class="icon">ğŸ’…</div><h3>Beauty</h3></div>
      <div class="category-card" data-category="Gardening and Landscaping"><div class="icon">ğŸŒ¿</div><h3>Gardening</h3></div>
      <div class="category-card" data-category="Mechanics Services"><div class="icon">ğŸš—</div><h3>Mechanics</h3></div>
    </div>
  </div>

  <!-- Frequently Used Services -->
  <div class="frequently-used-section">
    <div class="frequently-used-header">
      <h2 class="frequently-used-title">âœ¨ Frequently Used Services</h2>
      <p class="frequently-used-subtitle">Popular picks from real users like you</p>
    </div>
    <div class="frequently-used-grid" id="frequentlyUsedGrid"></div>
  </div>
</div>

<!-- Offers Modal -->
<div id="offersModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>All Exclusive Offers</h2>
      <span class="close-modal">&times;</span>
    </div>
    <div class="all-offers-grid" id="allOffersGrid"></div>
  </div>
</div>

<!-- Category Modal -->
<div id="categoryModal" class="home-cleaning-modal">
  <div class="home-cleaning-content">
    <div class="home-cleaning-header">
      <h2 id="modalCategoryTitle">Services</h2>
      <span class="home-cleaning-close" id="closeCategoryModal">&times;</span>
    </div>
    <div class="filter-sort-bar">
      <div class="filter-dropdown">
        <button class="filter-btn" id="filterBtn">Filter by Service</button>
        <div class="filter-dropdown-content" id="filterDropdown"></div>
      </div>
      <div class="sort-dropdown">
        <button class="sort-btn" id="sortBtn">Sort by: Popularity</button>
        <div class="sort-dropdown-content" id="sortDropdown">
          <label><input type="radio" name="sort" value="popularity" checked> Popularity</label>
          <label><input type="radio" name="sort" value="rating"> Rating (High â†’ Low)</label>
          <label><input type="radio" name="sort" value="price-low"> Price (Low â†’ High)</label>
          <label><input type="radio" name="sort" value="price-high"> Price (High â†’ Low)</label>
        </div>
      </div>
    </div>
    <div class="services-grid" id="categoryServicesGrid"></div>
  </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="modal">
  <div class="settings-content">
    <div class="settings-header">
      <h2>Settings</h2>
      <span class="settings-close" id="closeSettingsModal">&times;</span>
    </div>
    <div class="setting-item">
      <label class="setting-label"data-i18n="notifications">Notifications</label>
      <label class="toggle-switch">
        <input type="checkbox" id="notificationToggle" checked>
        <span class="slider"></span>
      </label>
    </div>
    <div class="setting-item">
      <label class="setting-label"data-i18n="language">Language</label>
      <select id="languageSelect">
        <option value="en">English</option>
        <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€ (Hindi)</option>
        <option value="es">EspaÃ±ol (Spanish)</option>
        <option value="fr">FranÃ§ais (French)</option>
      </select>
    </div>
    <div class="setting-item">
      <label class="setting-label"data-i18n="theme">Theme</label>
      <label class="toggle-switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
      <span id="themeLabel" style="margin-left:10px;color:#666;"data-i18n="lightMode">Light Mode</span>
    </div>
  </div>
</div>

<!-- Account Modal -->
<div id="accountModal" class="modal">
  <div class="account-content">
    <div class="account-header">
      <h2>My Account</h2>
      <span class="account-close" id="closeAccountModal">&times;</span>
    </div>
    <div class="account-details">
      <div class="account-avatar">ğŸ‘¤</div>
<div class="account-name-section">
  <h3 id="accountNameDisplay">${currentUser.name}</h3>
  <button id="editNameBtn" class="edit-name-btn">âœï¸ Edit Name</button>
</div>
<p style="color:#666;margin:10px 0;" id="accountEmailDisplay">${currentUser.email}</p>
<div class="account-info-item"><strong>Phone:</strong> +91 â€¢â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢â€¢</div>
<div class="account-info-item"><strong>Member Since:</strong> Jan 2024</div>
<div class="account-info-item"><strong>Location:</strong> Mumbai, India</div>
<div class="account-info-item"><strong>Active Bookings:</strong> 0</div>

<!-- Hidden edit form (initially) -->
<div id="editNameForm" style="display:none; margin-top:15px;">
  <input type="text" id="newNameInput" placeholder="Enter new name" value="${currentUser.name}" />
  <div style="margin-top:8px; display:flex; gap:8px;">
    <button id="saveNameBtn" class="save-btn"data-i18n="save">Save</button>
    <button id="cancelNameBtn" class="cancel-btn"data-i18n="cancel">Cancel</button>
  </div>
  <div id="nameError" style="color:#e74c3c; font-size:14px; margin-top:6px;"></div>
</div>
    </div>
  </div>
</div>

<!-- Feedback Modal -->
<div id="feedbackModal" class="modal">
  <div class="modal-content" style="max-width: 600px;">
    <div class="modal-header">
      <h2>Feedback for <span id="feedbackProviderName"></span></h2>
      <span class="close-modal" id="closeFeedbackModal">&times;</span>
    </div>

    <!-- Provider Summary -->
    <div class="feedback-provider-summary" style="background:#3a7b84; padding:14px; border-radius:10px; margin-bottom:20px; display:flex; gap:12px; align-items:center;">
      <div class="provider-avatar" style="width:40px; height:40px; border-radius:50%; background:#000000; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#555;">P</div>
      <div>
        <div><strong id="feedbackProviderFullName"></strong> â€¢ <span id="feedbackProviderExp"></span></div>
        <div>ğŸ“ <span id="feedbackProviderLocation"></span> â€¢ â­ <span id="feedbackProviderRating"></span></div>
      </div>
    </div>

    <!-- Past Feedbacks -->
    <div class="past-feedbacks-section" style="margin-bottom:20px;">
      <h3 style="font-size:16px; margin-bottom:10px; color:#555;">Recent Feedbacks</h3>
      <div id="pastFeedbacksList" style="max-height:120px; overflow-y:auto; border-top:1px solid #eee; padding-top:8px;"></div>
    </div>

    <!-- Rating -->
    <div class="form-group">
      <label>Your Rating</label>
      <div class="star-rating" id="starRatingContainer">
        <span class="star" data-value="1">â˜…</span>
        <span class="star" data-value="2">â˜…</span>
        <span class="star" data-value="3">â˜…</span>
        <span class="star" data-value="4">â˜…</span>
        <span class="star" data-value="5">â˜…</span>
      </div>
      <input type="hidden" id="userRating" value="5" />
    </div>

    <!-- Existing Feedback Form -->
    <form id="feedbackForm">
      <div class="form-group">
        <label for="feedbackTitle">Subject</label>
        <input type="text" id="feedbackTitle" placeholder="e.g., Great service!" maxlength="32" required />
        <div class="char-count" id="titleCount">0/32</div>
        <div class="error" id="titleError"></div>
      </div>
      <div class="form-group">
        <label for="feedbackDesc">Description</label>
        <textarea id="feedbackDesc" placeholder="Tell us about your experience..." rows="4" maxlength="100" required></textarea>
        <div class="char-count" id="descCount">0/100</div>
        <div class="error" id="descError"></div>
      </div>
      <div class="modal-footer">
        <button type="button" id="resetFeedback">Reset</button>
        <button type="submit">Submit Feedback</button>
      </div>
    </form>
  </div>
</div>

<!-- Footer -->
<footer class="modern-footer" id="footer">
  <div class="footer-content">
    <!-- Logo Section -->
    <div class="footer-logo-section">
      <div class="footer-logo">
        <div class="logo-icon"></div>
        <span class="logo-text">Cerco</span>
      </div>
      <p class="footer-slogan">Your Trusted Service Partner</p>
    </div>

    <!-- Contact & Policy Sections -->
    <div class="footer-columns">
      <!-- Contact Section -->
      <div class="footer-column contact-column">
        <h3>Contact Us</h3>
          <p style="margin: 8px 0; color: #cccccc; font-size: 15px;">
            ğŸ“ Customer Care: <strong>+91 98216 70359</strong>
          </p>
          <button class="contact-btn" id="openContactModal">Get in Touch</button>

        <!-- Social Media Icons -->
        <div class="social-icons">
          <a href="https://www.instagram.com/not.real_shreyansh/" target="_blank" class="social-icon"><i class="fa fa-instagram"></i></a>
          <a href="https://www.facebook.com/profile.php?id=61584008213373" target="_blank" class="social-icon"><i class="fa fa-facebook-f"></i></a>
          <a href="https://github.com/shreyansh-real" target="_blank" class="social-icon"><i class="fa fa-github"></i></a>
          <a href="https://wa.me/9821670359" target="_blank" class="social-icon"><i class="fa fa-whatsapp"></i></a>
        </div>
      </div>  

      <!-- Policies Section -->
      <div class="footer-column policies-column">
        <h3>Legal</h3>
        <ul>
          <li><a href="#" class="policy-link" id="privacyPolicy">Privacy Policy</a></li>
          <li><a href="#" class="policy-link" id="termsConditions">Terms & Conditions</a></li>
          <li><a href="#" class="policy-link" id="refundsPolicy">Refund Policy</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Footer Bottom -->
  <div class="footer-bottom">
    <p>&copy; 2026 Cerco. All rights reserved.</p>
    <div class="footer-copyright">
      <p>Made with â¤ï¸ for our users</p>
    </div>
  </div>
</footer>

<!-- Contact Modal -->
<div id="contactModal" class="modal">
  <div class="contact-modal-content">
    <div class="contact-modal-header">
      <h2>Contact Website Developer</h2>
      <span class="close-modal" id="closeContactModal">&times;</span>
    </div>
    <div class="contact-modal-body">
      <!-- Left: Logo + Info -->
      <div class="contact-info">
        <div class="contact-logo">
          <div class="logo-icon"></div>
          <span class="logo-text">Cerco</span>
        </div>
        <div class="contact-details">
          <p><i class="fa fa-envelope"></i> contact@cerco.com</p>
          <p><i class="fa fa-phone"></i> +91 98216 70359</p>
          <p><i class="fa fa-map-marker"></i> Mumbai, India</p>
        </div>
      </div>
      <!-- Right: Form -->
      <div class="contact-form">
        <form id="contactForm">
          <div class="form-group">
            <label for="userEmail">Your Gmail</label>
            <input type="email" id="userEmail" placeholder="you@gmail.com" required />
            <div class="error" id="emailError"></div>
          </div>
          <div class="form-group">
            <label for="userPhone">Phone Number</label>
            <input type="tel" id="userPhone" placeholder="+91 â€¢â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢â€¢" required />
            <div class="error" id="phoneError"></div>
          </div>
          <div class="form-group">
            <label for="userMessage">Your Message</label>
            <textarea id="userMessage" placeholder="How can we help you?" rows="3" required></textarea>
            <div class="error" id="messageError"></div>
          </div>
          <div class="form-actions">
            <button type="button" id="resetContactForm">Reset</button>
            <button type="submit">Send Message</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="scripthome.js"></script>

<script>
// Check if user is logged in
const currentUser = JSON.parse(localStorage.getItem('cerco_current_user'));
if (!currentUser) {
  alert("Please log in first.");
  window.location.href = "login.html";
}

// Update welcome message
const welcomeEl = document.getElementById('welcomeMessage');
welcomeEl.innerHTML = `<b>ğ•ğ•–ğ•ğ•”ğ• ğ•ğ•– ğ•‹ğ•  â„‚ğ•–ğ•£ğ•”ğ• , ${currentUser.name}!</b>`;

// Update account modal dynamically
const accountDetails = document.querySelector('#accountModal .account-details');
if (currentUser.isGuest) {
  accountDetails.innerHTML = `
    <div class="account-avatar">ğŸ‘¤</div>
    <div class="account-name-section">
      <h3 id="accountNameDisplay">Guest</h3>
      <!-- No edit button for guest -->
    </div>
    <p style="color:#666;margin:10px 0;" id="accountEmailDisplay">*</p>
    <div class="account-info-item"><strong>Phone:</strong> *</div>
    <div class="account-info-item"><strong>Member Since:</strong> *</div>
    <div class="account-info-item"><strong>Location:</strong> *</div>
    <div class="account-info-item"><strong>Active Bookings:</strong> *</div>
    <!-- No edit form for guest -->
  `;
} else {
  accountDetails.innerHTML = `
    <div class="account-avatar">ğŸ‘¤</div>
    <div class="account-name-section">
      <h3 id="accountNameDisplay">${currentUser.name}</h3>
      <button id="editNameBtn" class="edit-name-btn">âœï¸ Edit Name</button>
    </div>
    <p style="color:#666;margin:10px 0;" id="accountEmailDisplay">${currentUser.email}</p>
    <div class="account-info-item"><strong>Phone:</strong> +91 â€¢â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢â€¢</div>
    <div class="account-info-item"><strong>Member Since:</strong> Jan 2024</div>
    <div class="account-info-item"><strong>Location:</strong> Mumbai, India</div>
    <div class="account-info-item"><strong>Active Bookings:</strong> 0</div>
    <div id="editNameForm" style="display:none; margin-top:15px;">
      <input type="text" id="newNameInput" placeholder="Enter new name" value="${currentUser.name}" maxlength="50" />
      <div style="margin-top:8px; display:flex; gap:8px;">
        <button id="saveNameBtn" class="save-btn">Save</button>
        <button id="cancelNameBtn" class="cancel-btn">Cancel</button>
      </div>
      <div id="nameError" style="color:#e74c3c; font-size:14px; margin-top:6px;"></div>
    </div>
  `;

  // === EDIT NAME FUNCTIONALITY (only for non-guest) ===
  const editNameBtn = document.getElementById('editNameBtn');
  const editNameForm = document.getElementById('editNameForm');
  const newNameInput = document.getElementById('newNameInput');
  const saveNameBtn = document.getElementById('saveNameBtn');
  const cancelNameBtn = document.getElementById('cancelNameBtn');
  const nameError = document.getElementById('nameError');
  const accountNameDisplay = document.getElementById('accountNameDisplay');

  editNameBtn?.addEventListener('click', () => {
    editNameForm.style.display = 'block';
    newNameInput.focus();
  });

  cancelNameBtn?.addEventListener('click', () => {
    editNameForm.style.display = 'none';
    nameError.textContent = '';
  });

  saveNameBtn?.addEventListener('click', () => {
    const newName = newNameInput.value.trim();
    nameError.textContent = '';
    if (!newName) {
      nameError.textContent = "Name cannot be empty.";
      return;
    }
    if (newName.length < 2) {
      nameError.textContent = "Name must be at least 2 characters.";
      return;
    }
    const updatedUser = { ...currentUser, name: newName };
    localStorage.setItem('cerco_current_user', JSON.stringify(updatedUser));
    accountNameDisplay.textContent = newName;
    welcomeEl.innerHTML = `<b>ğ•ğ•–ğ•ğ•”ğ• ğ•ğ•– ğ•‹ğ•  â„‚ğ•–ğ•£ğ•”ğ• , ${newName}!</b>`;
    editNameForm.style.display = 'none';

    const users = JSON.parse(localStorage.getItem('cerco_users') || '[]');
    const userIndex = users.findIndex(u => u.email === updatedUser.email);
    if (userIndex !== -1) {
      users[userIndex].name = newName;
      localStorage.setItem('cerco_users', JSON.stringify(users));
    }
    alert("âœ… Name updated successfully!");
  });
}
</script>


</body>
</html>